package com.mpcz.deposit_scheme.backend.api.repository;

import java.util.Map;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

import com.mpcz.deposit_scheme.backend.api.domain.ContractorForBid;

@Repository
public interface ContractorForBidRepository extends JpaRepository<ContractorForBid, Long> {

	@Query(value = "SELECT * from CONTRACTOR_FOR_BID where CONSUMER_APPLICATION_NUMBER =:applicationNo", nativeQuery = true)
	ContractorForBid findByApplicationNo(String applicationNo);

	@Query(value = "SELECT cfb.*,cfbws.USER_ID from CONTRACTOR_FOR_BID cfb left join CONTRACTOR_FOR_BID_WORK_STATUS  cfbws on cfb.CONSUMER_APPLICATION_NUMBER = cfbws.CONSUMER_APPLICATION_NUMBER \r\n"
			+ "where cfb.CONSUMER_APPLICATION_NUMBER =:applicationNo", nativeQuery = true)
	Map<String, String> findByApplicationNo1(String applicationNo);
}