package com.mpcz.deposit_scheme.backend.api.controller;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.Map;
import java.util.function.Function;
import java.util.stream.Collector;
import java.util.stream.Collectors;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.mpcz.deposit_scheme.backend.api.domain.BillDeskPaymentResponse;
import com.mpcz.deposit_scheme.backend.api.domain.ConsumerApplicationDetail;
import com.mpcz.deposit_scheme.backend.api.repository.BillPaymentResponseeeeeeeRepository;
import com.mpcz.deposit_scheme.backend.api.repository.ConsumerApplictionDetailRepository;

//@RestController
//@RequestMapping("/stream")
public class StreamController {

	@Autowired
	private ConsumerApplictionDetailRepository consumerApplictionDetailRepository;

	@Autowired
	private static BillPaymentResponseeeeeeeRepository billpaymentResponse1;

	@Autowired
	private static ConsumerApplictionDetailRepository consumerApplictionDetailRepository1;

//	public static void main(String args[]) {
//		m124();
////		m();
//	}

//	public static void m() {
//		consumerApplictionDetailRepository1.findAll().stream()
//				.filter(cad -> cad.getApplicationStatus().getApplicationStatusId() == 21L).forEach(cad1 -> {
//					List<BillDeskPaymentResponse> findByConsumerApplicationNo = billpaymentResponse1
//							.findByConsumerApplicationNo(cad1.getConsumerApplicationNo());
//					findByConsumerApplicationNo.stream().filter(bill -> bill.getAuth_status().equals("0300")
//							&& bill.getAdditionalInfo().equals("Demand_Fess")).forEach(bill1 -> {
//								String transactionDate = bill1.getTransactionDate();
//
//								String dateString = transactionDate;
//
//								LocalDateTime dateTime = LocalDateTime.parse(dateString,
//										DateTimeFormatter.ISO_OFFSET_DATE_TIME);
//
//								String formattedDate = dateTime.format(DateTimeFormatter.ofPattern("dd-MM-yyyy"));
//
//								System.out.println("Formatted Date: " + formattedDate);
//
//								LocalDateTime modifiedDateTime = dateTime.plusDays(3);
//
//								// Format the modified date
//								String modifiedFormattedDate = modifiedDateTime
//										.format(DateTimeFormatter.ofPattern("dd-MM-yyyy"));
//
//								cad1.setPaymentDate(modifiedFormattedDate);
//								
////								ConsumerApplicationDetail save = consumerApplictionDetailRepository.save(cad1);
//
//							});
//
//				});
//
////		Map<ConsumerApplicationDetail, List<ConsumerApplicationDetail>> collect = consumerApplictionDetailRepository
////				.findAll().stream().collect(Collectors.groupingBy(Function.identity()));
////		System.out.println(collect);
//	}

	public static void m1() {
//		1) Given a list of integers, separate odd and even numbers?

		List<Integer> l = new ArrayList<>();
		l.add(13);
		l.add(1);
		l.add(23);
		l.add(10);
		l.add(11);
		l.add(313);
		l.add(18);
		l.add(1875);
		l.add(13828390);
		l.add(1282);
		l.add(103);
		l.add(681361);
		l.add(130);
//		l.stream().collect(Collectors.partitioningBy(s -> s % 2 == 0)).entrySet().forEach(s1 -> {
//			s1.getValue().forEach(s2 -> {
//				if (s1.getKey()) {
//
//					System.out.println("this is even no" + s2);
//				} else {
//					System.out.println("this is odd no" + s2);
//
//				}
//			});
//		});

		
	
	}

	public static void m2() {

		String name = "charitra kumar prajapti";
		Map<Character, Long> collect = name.chars().mapToObj(s -> (char) s)
				.collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));
		System.out.println(collect);
	}

	public static void m3() {

		String name = "charitra kumar prajapti";

		Map<Character, Long> collect = name.chars().mapToObj(s -> (char) s)
				.collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));

	}

	public static void m124() {
	
//				  consumerApplictionDetailRepository1.findAll().stream()
//				.collect(Collectors.groupingBy(cad->cad.getApplicationStatus().getApplicationStatusId(),Collectors.counting())).entrySet().forEach(s->{
//					System.out.println(s.getKey());
//				});
				
		
		List<ConsumerApplicationDetail> findAll = consumerApplictionDetailRepository1.findAll();
		System.out.println(findAll);
		Map<Long, Long> collect = findAll.stream()
			.collect(Collectors.groupingBy(f1-> f1.getApplicationStatus().getApplicationStatusId(),Collectors.counting()));
		  System.out.println(collect);
	}
}
